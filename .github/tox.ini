[tox]
envlist = py38,flake8

[testenv]
deps = 
    -r{toxinidir}../openimis/requirements.txt
    -r{toxinidir}../openimis/modules-requirements.txt
    coverage
commands =
    cd {toxinidir}../openimis/openIMIS
    coverage erase
    coverage run manage.py test --keepdb {env:MODULE_NAME}
    coverage report

[testenv:flake8]
basepython = python
deps = flake8
commands = flake8 --append-config ../openimis/.flake8 --output-file=flake8-report.txt --exit-zero
